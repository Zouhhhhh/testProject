



个人资料云存储网站



需求分析：

​	目前我的存储资料的地方比较分散，比如

1. 源代码都放github，但是因为打开很慢，而且push和pull都比较麻烦，所以与本地的代码不能及时同步；
2. 一些简单的文档都放在腾讯文档，还有一些笔记都放在CSDN，看是很方便，但是难以集中。比如腾讯文档的都是word文件，csdn的是markdown格式；
3. 百度网盘，这个。。慢得一批，但是可以放一放资源文件，安装包之类的；
4. 朋友圈，微信加了很多人后就想分享东西都没地方了，微博发就更乱了，所以有一个自己的朋友圈用来存放纯文字心情，插图日记挺好的；
5. 个人相册，虽然这个跟朋友圈差不多，但是适合存放大量的杂乱的怀旧照片，而不是心情类的插图日志。
6. 。。。。。。





技术分析：

感觉比较容易一点就是朋友圈的实现咯，文字+图片，那就先拿这个练练手





技术实现（前后端分离）：

后端：

1. ~~分为四个module，分别是domain、ext、rest、vo~~
2. ~~先在domain实现朋友圈发文字记录的增删改查，后面再把具体实现分到各个模块~~
3. 先创一个wechatmoments模块，按照正常的包开发
4. 用spring、springmvc、mybatis



前端：

1. vue
2. element组件





## 一、配置环境

1. 创建项目myzone

    

2. 在wechatmoments模块下的resources包下新建config文件夹，按照springboot配置文件加载顺序，最先加载的是这个文件夹下的。

![1642909473553](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1642909473553.png)



3. 创建两个配置文件，一个是主的application.yml，另一个是开发环境的，然后用主的指定加载开发环境的配置文件

```xml
server:
  port: 8081
spring:
  profiles:
    active: dev


dev的application-dev.yml
server:
  port: 8081
spring:
  datasource:
    username: root
    password: root
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/myzone?serverTimezone=UTC&characterEncoding=utf-8

```

4. 再搞个banner.txt，启动时图案





## 二、测试

1. 基本弄好了环境，搞个controller测试一下

2. 遇到了第一个坑，主项目的pom依赖没有关联到子module里面

    解决：原来是父工程没有和子模块关联起来，需要去两个pom文件里面修改配置

3. 测试成功





## 三、开搞开搞

1. 新建数据库和表

2. springboot整合mybatis

3. application.yml配置mybatis（替代之前的mybatis核心配置文件）

    ```xml
    server:
      port: 8081
    
    spring:
      datasource:
        username: root
        password: root
        driver-class-name: com.mysql.cj.jdbc.Driver
        url: jdbc:mysql://localhost:3306/myzone?serverTimezone=UTC&characterEncoding=utf-8
    
    mybatis:
      mapper-locations: classpath:mapping/*Mapper.xml
    ```

4. 创建类Mood

5. 创建MoodMapper，回顾@Repository注解的作用，将一个接口的实现类交给spring管理，并且用在持久层的接口上

    ```java
    @Repository
    public interface MoodMapper {
        Mood getById(String id);
    }
    ```

    

6. 创建MoodService

    ```java
    @Service
    public class MoodService {
    
        @Autowired
        private MoodMapper moodMapper;
    
        public Mood getById(String id) {
            return moodMapper.getById(id);
        }
    
    }
    ```

    

7. 创建MoodController

    ```java
    @RestController
    @RequestMapping("/mood")
    public class MoodController {
    
        @Autowired
        private MoodService moodService;
    
        @RequestMapping("/getById/{id}")
        public String getById(@PathVariable String id) {
            return moodService.getById(id).toString();
        }
        
    }
    ```

    这里回顾一下restful风格传参，以及方法参数上的注解@PathVariable



8. 在rescource下创建mapping包（对应yml文件里面配置的核心配置，找mapper文件的位置），然后写一个查询Mood的mapper，这里再回顾一下 <resultMap >，主要就是数据库字段和实体类字段名不对应，所以需要手动关联起来

    ```xml
    <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    <mapper namespace="wechatmoments.mapper.MoodMapper">
    
    <!--    <resultMap id="BaseResultMap" type="wechatmoments.pojo.Mood">-->
    <!--        <result column="id" jdbcType="INTEGER" property="id" />-->
    <!--        <result column="userName" jdbcType="VARCHAR" property="userName" />-->
    <!--        <result column="passWord" jdbcType="VARCHAR" property="passWord" />-->
    <!--        <result column="realName" jdbcType="VARCHAR" property="realName" />-->
    <!--    </resultMap>-->
    
        <select id="getById" resultType="wechatmoments.pojo.Mood">
            select * from mood where id = #{id}
        </select>
    
    </mapper>
    ```

9. 然后是主启动类上需要设置扫描mapper接口

    ```java
    @MapperScan("wechatmoments.mapper")
    ```

10. 启动，测试，完成




## 四、前端

1. vue  create myzone创建项目



